<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classlist Toolkit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
        }

        body {
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            padding: 15px;
            transition: background 0.5s ease;
            overflow: hidden;
        }

        .palette-0 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .palette-1 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .palette-2 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .palette-3 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .palette-4 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        .palette-5 { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        .palette-6 { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); }
        .palette-7 { background: linear-gradient(135deg, #30336b 0%, #130f40 100%); }

        /* Setup Page */
        .setup-page {
            max-width: 650px;
            margin: 50px auto;
            background: rgba(255,255,255,0.15);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
        }

        .setup-page h1 {
            color: white;
            text-align: center;
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .setup-section {
            margin-bottom: 20px;
        }

        .setup-section label {
            color: white;
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
            font-size: 1rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .setup-section input[type="text"],
        .setup-section textarea {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            background: rgba(255,255,255,0.95);
        }

        .setup-section textarea {
            height: 80px;
            resize: vertical;
        }

        .palette-selector {
            margin-bottom: 15px;
        }

        .palette-grid {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .palette-option {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            border: 3px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .palette-option:hover {
            transform: scale(1.1);
        }

        .palette-option.selected {
            border-color: white;
            border-width: 4px;
            transform: scale(1.15);
            box-shadow: 0 4px 12px rgba(255,255,255,0.4);
        }

        .generate-btn {
            background: #4facfe;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .url-result {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .url-result h3 {
            color: white;
            margin-bottom: 10px;
        }

        .url-display {
            background: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 5px;
            word-break: break-all;
            font-family: monospace;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .url-buttons {
            display: flex;
            gap: 10px;
        }

        .url-buttons button {
            flex: 1;
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
        }

        /* Main Board */
        .main-board {
            height: calc(100vh - 30px);
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 12px 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .class-name {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header-buttons button {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .header-buttons button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .widgets-container {
            flex: 1;
            display: grid;
            gap: 15px;
            grid-template-columns: repeat(2, 1fr);
        }

        .widget {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid rgba(255,255,255,0.2);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .widget-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
        }

        .widget-title {
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .widget-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* UPDATED: This spaces elements vertically */
            align-items: center;
        }

        /* --- UPDATED Name Picker Widget Styles --- */
        .available-students-list {
            width: 95%;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px; /* Reduced margin slightly */
            color: white;
            text-align: center;
            white-space: normal; /* UPDATED: Allows text to wrap */
            word-break: break-word; /* Helps with long names */
            line-height: 1.5; /* Improves readability of wrapped text */
            font-size: 1rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .name-picker-wheel {
            min-height: 280px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 5px 0;
            width: 100%;
            perspective: 400px;
            transition: all 0.2s ease;
        }

        .name-slot {
            font-weight: bold;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            transition: all 0.15s ease-out;
            text-align: center;
            padding: 2px 0;
        }

        .name-slot:nth-child(1) { /* Far top */
            font-size: 1.5rem;
            opacity: 0.4;
            filter: blur(4px);
        }
        .name-slot:nth-child(2) { /* Near top */
            font-size: 2.5rem;
            opacity: 0.7;
            filter: blur(2px);
        }
        .name-slot:nth-child(3) { /* Center */
            font-size: 5rem;
            opacity: 1;
            filter: blur(0);
            padding: 10px 0;
        }
        .name-slot:nth-child(4) { /* Near bottom */
            font-size: 2.5rem;
            opacity: 0.7;
            filter: blur(2px);
        }
        .name-slot:nth-child(5) { /* Far bottom */
            font-size: 1.5rem;
            opacity: 0.4;
            filter: blur(4px);
        }
        
        .name-slot.winner {
            color: #fee140;
            text-shadow: 0 0 5px #fee140, 0 0 15px #fa709a, 0 0 25px #fa709a;
            transform: scale(1.05);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1.05); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1.05); }
        }

        .picker-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            width: 100%;
            margin-top: 10px;
        }

        .pick-button {
            background: white;
            color: #667eea;
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .pick-button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
        }

        .pick-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255,255,255,0.2);
            padding: 12px 20px;
            border-radius: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-container label {
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .reset-button {
            background: rgba(255,255,255,0.3);
            color: white;
            border: 2px solid rgba(255,255,255,0.5);
            padding: 10px 25px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reset-button:hover {
            background: rgba(255,255,255,0.4);
            transform: translateY(-2px);
        }

        /* Group Generator Widget */
        .group-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .group-controls label {
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .group-controls input {
            width: 80px;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            text-align: center;
            font-weight: bold;
        }

        .group-controls button {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .group-controls button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .groups-display {
            flex: 1;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            overflow-y: auto;
            align-content: flex-start;
            justify-content: center;
            padding: 10px;
        }

        .group-box {
            border-radius: 12px;
            padding: 15px;
            min-width: 180px;
            border: 3px solid rgba(255,255,255,0.4);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .group-box:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .group-box h4 {
            color: white;
            margin-bottom: 10px;
            font-size: 1.2rem;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .group-box ul {
            list-style: none;
            color: white;
            font-size: 1rem;
        }

        .group-box li {
            padding: 5px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* Fun gradient colors for groups */
        .group-color-0 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .group-color-1 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .group-color-2 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .group-color-3 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .group-color-4 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        .group-color-5 { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); }
        .group-color-6 { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        .group-color-7 { background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); }
        .group-color-8 { background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%); }
        .group-color-9 { background: linear-gradient(135deg, #fdbb2d 0%, #22c1c3 100%); }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .widgets-container {
                grid-template-columns: 1fr !important;
            }
            .widget-title {
                font-size: 1.4rem;
            }
            .name-slot:nth-child(3) {
                font-size: 3.5rem; /* Adjust center name for smaller screens */
            }
            .name-picker-wheel {
                min-height: 220px; /* Adjust height */
            }
        }
    </style>
</head>
<body class="palette-0">

    <div id="setupPage" class="setup-page">
        <h1>🎓 Classlist Toolkit Setup</h1>
        
        <div class="setup-section">
            <label>Class Name:</label>
            <input type="text" id="className" placeholder="e.g., Mrs. Smith's 3rd Grade">
        </div>

        <div class="setup-section">
            <label>Student Names (comma-separated):</label>
            <textarea id="studentNames" placeholder="Emma, Liam, Olivia, Noah, Ava, Elijah, Sophia..."></textarea>
        </div>

        <div class="setup-section palette-selector">
            <label>Color Theme:</label>
            <div class="palette-grid">
                <div class="palette-option selected" data-palette="0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                <div class="palette-option" data-palette="1" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                <div class="palette-option" data-palette="2" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);"></div>
                <div class="palette-option" data-palette="3" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);"></div>
                <div class="palette-option" data-palette="4" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);"></div>
                <div class="palette-option" data-palette="5" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);"></div>
                <div class="palette-option" data-palette="6" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);"></div>
                <div class="palette-option" data-palette="7" style="background: linear-gradient(135deg, #30336b 0%, #130f40 100%);"></div>
            </div>
        </div>

        <button class="generate-btn" onclick="generateToolkit()">Generate Toolkit</button>

        <div id="urlResult" class="url-result hidden">
            <h3>Your Classroom Toolkit URL:</h3>
            <div id="urlDisplay" class="url-display"></div>
            <div class="url-buttons">
                <button onclick="copyUrl()">Copy URL</button>
                <button onclick="loadToolkit()">Load Toolkit</button>
            </div>
        </div>
    </div>

    <div id="mainBoard" class="main-board hidden">
        <div class="header">
            <div class="class-name" id="displayClassName">My Class</div>
            <div class="header-buttons">
                <button onclick="backToSetup()">⚙️ Settings</button>
            </div>
        </div>

        <div id="widgetsContainer" class="widgets-container">
            
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title">🎲 Random Name Picker</div>
                </div>
                <div class="widget-content">
                    <div class="available-students-list" id="availableStudentsList"></div>
                    <div class="name-picker-wheel" id="namePickerWheel">
                        <div class="name-slot"></div>
                        <div class="name-slot"></div>
                        <div class="name-slot">Ready!</div>
                        <div class="name-slot"></div>
                        <div class="name-slot"></div>
                    </div>
                    <div class="picker-controls">
                        <button class="pick-button" id="pickButton" onclick="pickRandomName()">Pick a Name</button>
                        <div class="checkbox-container">
                            <input type="checkbox" id="eliminateCheckbox">
                            <label for="eliminateCheckbox">Eliminate picked names?</label>
                        </div>
                        <button class="reset-button" onclick="resetNamePicker()">Reset Names</button>
                    </div>
                </div>
            </div>

            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title">💡 Group Generator</div>
                </div>
                <div class="widget-content">
                    <div class="group-controls">
                        <label>Group Size:</label>
                        <input type="number" id="groupSize" value="4" min="2" max="10">
                        <button onclick="generateGroups()">Generate Groups</button>
                    </div>
                    <div class="groups-display" id="groupsDisplay">
                        <p style="color: white; font-size: 1.2rem; text-align: center; opacity: 0.7;">
                            Click "Generate Groups" to create random groups!
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let students = [];
        let availableStudents = [];
        let className = '';
        let selectedPalette = 0;
        let generatedUrl = '';

        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const studentsParam = urlParams.get('students');
            const classNameParam = urlParams.get('class');
            const paletteParam = urlParams.get('palette');
            
            if (paletteParam !== null) selectedPalette = parseInt(paletteParam) || 0;
            applyPalette(selectedPalette);
            
            if (studentsParam) {
                students = studentsParam.split(',').map(name => decodeURIComponent(name.trim())).filter(name => name);
                availableStudents = [...students];
                className = classNameParam ? decodeURIComponent(classNameParam) : 'My Class';
                showMainBoard();
            } else {
                showSetupPage();
            }
        };

        function showSetupPage() {
            document.getElementById('setupPage').classList.remove('hidden');
            document.getElementById('mainBoard').classList.add('hidden');
            initializePaletteSelector();
        }

        function showMainBoard() {
            document.getElementById('setupPage').classList.add('hidden');
            document.getElementById('mainBoard').classList.remove('hidden');
            document.getElementById('displayClassName').textContent = className;
            updateAvailableStudentsList();
        }

        function initializePaletteSelector() {
            const paletteOptions = document.querySelectorAll('.palette-option');
            paletteOptions.forEach((option, index) => {
                option.addEventListener('click', function() {
                    paletteOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedPalette = index;
                    applyPalette(selectedPalette);
                });
            });
        }

        function applyPalette(paletteIndex) {
            for (let i = 0; i <= 7; i++) document.body.classList.remove(`palette-${i}`);
            document.body.classList.add(`palette-${paletteIndex}`);
        }

        function generateToolkit() {
            const namesInput = document.getElementById('studentNames').value;
            const classInput = document.getElementById('className').value;
            
            if (!namesInput.trim()) {
                alert('Please enter student names!');
                return;
            }

            students = namesInput.split(',').map(name => name.trim()).filter(name => name);
            availableStudents = [...students];
            className = classInput.trim() || 'My Class';
            
            const baseUrl = window.location.href.split('?')[0];
            const encodedStudents = students.map(name => encodeURIComponent(name)).join(',');
            const encodedClass = encodeURIComponent(className);
            generatedUrl = `${baseUrl}?students=${encodedStudents}&class=${encodedClass}&palette=${selectedPalette}`;
            
            document.getElementById('urlDisplay').textContent = generatedUrl;
            document.getElementById('urlResult').classList.remove('hidden');
        }

        function copyUrl() {
            navigator.clipboard.writeText(generatedUrl).then(() => {
                alert('URL copied to clipboard!');
            });
        }

        function loadToolkit() {
            showMainBoard();
        }

        function backToSetup() {
            if (confirm('Return to setup? This will clear your current board.')) {
                document.getElementById('studentNames').value = students.join(', ');
                document.getElementById('className').value = className;
                
                const paletteOptions = document.querySelectorAll('.palette-option');
                paletteOptions.forEach((opt, idx) => {
                    if (idx === selectedPalette) {
                        opt.classList.add('selected');
                    } else {
                        opt.classList.remove('selected');
                    }
                });
                
                document.getElementById('urlResult').classList.add('hidden');
                showSetupPage();
            }
        }

        // --- Name Picker Functions ---

        function updateAvailableStudentsList() {
            const listContainer = document.getElementById('availableStudentsList');
            if (!listContainer) return;

            if (availableStudents.length > 0) {
                listContainer.textContent = availableStudents.join(' | ');
            } else {
                listContainer.textContent = 'All students eliminated!';
            }
        }

        function pickRandomName() {
            const eliminate = document.getElementById('eliminateCheckbox').checked;
            const studentsToPickFrom = eliminate ? availableStudents : students;
            
            if (studentsToPickFrom.length === 0) {
                alert('All students have been eliminated! Click "Reset Names" to start over.');
                return;
            }
            
            const wheel = document.getElementById('namePickerWheel');
            const slots = wheel.getElementsByClassName('name-slot');
            const button = document.getElementById('pickButton');
            button.disabled = true;
            
            for (const slot of slots) {
                slot.classList.remove('winner');
                slot.style.animation = 'none';
            }

            let spinTime = 0;
            const totalSpinDuration = 3000;
            let delay = 80;

            function spinLoop() {
                spinTime += delay;

                const shuffled = [...studentsToPickFrom].sort(() => 0.5 - Math.random());
                for (let i = 0; i < slots.length; i++) {
                    slots[i].textContent = shuffled[i % shuffled.length] || '';
                }

                if (spinTime < totalSpinDuration) {
                    delay *= 1.045;
                    setTimeout(spinLoop, delay);
                } else {
                    finalizePick();
                }
            }

            function finalizePick() {
                const picked = studentsToPickFrom[Math.floor(Math.random() * studentsToPickFrom.length)];
                
                const displayNames = new Array(5).fill('');
                displayNames[2] = picked;
                
                let others = studentsToPickFrom.filter(s => s !== picked);
                if (studentsToPickFrom.length === 1) {
                    others = [picked, picked, picked, picked];
                } else if (others.length === 0) {
                    others = [picked];
                }

                displayNames[1] = others[0 % others.length];
                displayNames[3] = others[1 % others.length];
                displayNames[0] = others[2 % others.length];
                displayNames[4] = others[3 % others.length];

                for(let i=0; i < slots.length; i++) {
                    slots[i].textContent = displayNames[i];
                }
                
                slots[2].classList.add('winner');
                slots[2].style.animation = 'pulse 1.5s infinite';
                
                if (eliminate) {
                    availableStudents = availableStudents.filter(s => s !== picked);
                    updateAvailableStudentsList();
                }
                
                button.disabled = false;
            }

            spinLoop();
        }

        function resetNamePicker() {
            availableStudents = [...students];
            const slots = document.getElementById('namePickerWheel').getElementsByClassName('name-slot');
            
            slots[0].textContent = '';
            slots[1].textContent = '';
            slots[2].textContent = 'Ready!';
            slots[3].textContent = '';
            slots[4].textContent = '';

            slots[2].classList.remove('winner');
            slots[2].style.animation = 'none';
            
            updateAvailableStudentsList();
            alert('Name list has been reset!');
        }

        // Group Generator Functions
        function generateGroups() {
            const groupSize = parseInt(document.getElementById('groupSize').value);
            const display = document.getElementById('groupsDisplay');
            display.innerHTML = '';
            
            if (groupSize < 2 || groupSize > students.length) {
                display.innerHTML = '<p style="color: white; font-size: 1.1rem; text-align: center;">Invalid group size!</p>';
                return;
            }
            
            const shuffled = [...students].sort(() => Math.random() - 0.5);
            const numGroups = Math.ceil(shuffled.length / groupSize);
            
            for (let i = 0; i < numGroups; i++) {
                const groupBox = document.createElement('div');
                groupBox.className = `group-box group-color-${i % 10}`;
                
                const groupTitle = document.createElement('h4');
                groupTitle.textContent = `Group ${i + 1}`;
                
                const groupList = document.createElement('ul');
                const start = i * groupSize;
                const end = Math.min(start + groupSize, shuffled.length);
                
                for (let j = start; j < end; j++) {
                    const li = document.createElement('li');
                    li.textContent = shuffled[j];
                    groupList.appendChild(li);
                }
                
                groupBox.appendChild(groupTitle);
                groupBox.appendChild(groupList);
                display.appendChild(groupBox);
            }
        }
    </script>
</body>
</html>