<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Tools Portal</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <style>
        /* Base Styling */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #eef2f7; /* Light, modern background */
            color: #333;
        }

        /* Main App Container - Centers content */
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styling */
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background-color: #ffffff;
            border-bottom: 3px solid #007cba; /* Highlight color */
            border-radius: 0 0 8px 8px;
        }
        .header h1 {
            color: #007cba;
            margin-bottom: 5px;
        }
        .header p {
            color: #6a737d;
        }

        /* Tool Grid Layout */
        #tool-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Responsive grid */
            gap: 20px; /* Space between cards */
            padding-top: 20px;
        }

        /* Tool Card Styling */
        .tool-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08); /* Softer shadow */
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex; /* For button placement */
            flex-direction: column;
            justify-content: space-between;
        }
        .tool-card:hover {
            transform: translateY(-5px); /* Lift effect on hover */
            box-shadow: 0 6px 18px rgba(0,0,0,0.15);
        }
        .tool-title {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        .tool-description {
            color: #7f8c8d;
            line-height: 1.6;
            margin-bottom: 15px;
            flex-grow: 1; /* Pushes button to the bottom */
        }
        .tool-button {
            display: inline-block;
            background-color: #2ecc71; /* Green for action */
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 6px;
            text-align: center;
            transition: background-color 0.3s;
            font-weight: 500;
            border: none; /* Look like a button, not a link */
            cursor: pointer;
            width: 100%; /* Make button full width of card padding */
        }
        .tool-button:hover {
            background-color: #27ae60;
        }

        /* --- NEW CSS FOR TUTORIAL LINK & VIDEO MODAL --- */
        .tutorial-link {
            display: block;
            text-align: center;
            margin-top: 12px;
            font-size: 0.8em;
            color: #007cba;
            text-decoration: none;
            cursor: pointer;
        }
        .tutorial-link:hover {
            text-decoration: underline;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            z-index: 2000;
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .close-modal-button {
            position: absolute;
            top: -15px;
            right: -15px;
            background: #333;
            color: white;
            border: 2px solid white;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        #tutorial-video {
            width: 100%;
            height: auto;
            border-radius: 4px;
        }
        /* --- END NEW CSS --- */


        /* Tool Viewer (The Frame) */
        #tool-viewer-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #eef2f7;
            z-index: 1000;
            display: none; /* Initially hidden */
            flex-direction: column;
        }
        .tool-viewer-header {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            background-color: #007cba;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            color: white;
        }
        #back-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            padding: 0 15px 0 0;
            font-weight: bold;
        }
        #tool-viewer-title {
            font-size: 1.1em;
            margin: 0;
        }
        #tool-iframe {
            flex-grow: 1;
            width: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div id="home-view">
            <div class="header">
                <h1>MERSD Teacher Tools</h1>
                <p>A collection of simple tools and utilities for teachers and school staff. Select a tool below to get started. If you have an idea for a tool, please reach out to Chris Dwyer.</p>
            </div>

            <div id="tool-grid">
                
                <div class="tool-card">
                    <div>
                        <div class="tool-title">QR Code Generator</div>
                        <div class="tool-description">Generate MERSD-branded QR codes for easily sharing links and resources.</div>
                    </div>
                    <div>
                        <button class="tool-button open-tool" data-url="mersd-qr.html" data-title="QR Code Generator">Open QR Code Generator</button>
                        <a class="tutorial-link" data-video-src="videos/qr-tutorial.mp4">How do I use this?</a>
                    </div>
                </div>
                <div class="tool-card">
                    <div>
                        <div class="tool-title">HEIC/HEIF (iOS image) to JPG Converter</div>
                        <div class="tool-description">Convert Apple '.HEIC' (High-Efficiency) photos to standard '.JPG' files right in your browser. Your images are never uploaded.</div>
                    </div>
                     <div>
                        <button class="tool-button open-tool" data-url="heic-converter.html" data-title="HEIC/HEIF to JPG Converter">Open HEIC/HEIF to JPG Converter</button>
                        <a class="tutorial-link" data-video-src="videos/heic-tutorial.mp4">How do I use this?</a>
                    </div>
                </div>
                <div class="tool-card">
                    <div>
                        <div class="tool-title">OCR Visual Read Aloud <small><italics><br>(work in progress)</small></div>
                        <div class="tool-description">Scan images containing text and have it read aloud or click individual words to hear them spoken. <strong>Still being developed -</strong> currently only works with clear, high-contrast images containing only text.</div>
                    </div>
                     <div>
                        <button class="tool-button open-tool" data-url="ocr-scanner.html" data-title="OCR Visual Read Aloud">Open OCR Text Reader</button>
                        <a class="tutorial-link" data-video-src="videos/tut-coming-soon.mp4">How do I use this?</a>
                    </div>
                </div>

                <div class="tool-card">
                    <div>
                        <div class="tool-title">Google Drive Voice Recorder</div>
                        <div class="tool-description">Simple audio recording tool that saves audio files directly to your Google Drive. Handy for quickly inserting audio notes into your lessons.</div>
                    </div>
                    <div>
                        <button class="tool-button open-tool" data-url="voice-recorder-gdrive.html" data-title="GDrive Voice Recorder">Open Voice Recorder</button>
                        <a class="tutorial-link" data-video-src="videos/tut-coming-soon.mp4">How do I use this?</a>
                    </div>
                </div>

                <div class="tool-card">
                    <div>
                        <div class="tool-title">Lunch Choice Board</div>
                        <div class="tool-description">Generate a custom lunch choice board with your class roster. Get a reusable link that you can bookmark in your browser. Rosters are stored locally in your browser and never shared.</div>
                    </div>
                    <div>
                        <button class="tool-button open-tool" data-url="lunch_choice.html" data-title="Lunch Choice Board">Open Lunch Choice Board</button>
                        <a class="tutorial-link" data-video-src="videos/tut-coming-soon.mp4">How do I use this?</a>
                    </div>
                </div>
                <div class="tool-card">
                    <div>
                        <div class="tool-title">Classlist Group and Name Picker</div>
                        <div class="tool-description">Enter your class roster to generate a reusable link for group generating and random name picker. Rosters are stored locally in your browser and never shared.</div>
                    </div>
                     <div>
                        <button class="tool-button open-tool" data-url="classroom-toolkit.html" data-title="Classroom Toolkit">Classlist Toolkit</button>
                        <a class="tutorial-link" data-video-src="videos/classlist-tutorial.mp4">How do I use this?</a>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div id="tool-viewer-container">
        <div class="tool-viewer-header">
            <button id="back-button">← More Tools</button>
            <h2 id="tool-viewer-title">Tool Title</h2>
        </div>
        <iframe id="tool-iframe" src="" title="Tool Viewer"></iframe>
    </div>

    <div id="video-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal-button">&times;</button>
            <video id="tutorial-video" controls playsinline></video>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toolButtons = document.querySelectorAll('.open-tool');
            const toolViewer = document.getElementById('tool-viewer-container');
            const toolIframe = document.getElementById('tool-iframe');
            const backButton = document.getElementById('back-button');
            const toolViewerTitle = document.getElementById('tool-viewer-title');
            const homeView = document.getElementById('home-view');

            // 1. Tool Button Click Handler (Opens the frame)
            toolButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const url = e.currentTarget.getAttribute('data-url');
                    const title = e.currentTarget.getAttribute('data-title');

                    toolIframe.src = url;
                    toolViewerTitle.textContent = title;
                    toolViewer.style.display = 'flex';
                    homeView.style.display = 'none';
                    history.pushState({ tool: url }, title, `?tool=${encodeURIComponent(url)}`);
                });
            });

            // 2. Back Button Click Handler (Closes the frame)
            backButton.addEventListener('click', () => {
                closeToolViewer();
                history.pushState(null, 'Teacher Tools Portal', window.location.pathname);
            });

            function closeToolViewer() {
                toolViewer.style.display = 'none';
                homeView.style.display = 'block';
                toolIframe.src = 'about:blank';
                toolViewerTitle.textContent = '';
            }

            // 3. Handle browser back/forward buttons
            window.addEventListener('popstate', (event) => {
                const urlParams = new URLSearchParams(window.location.search);
                const toolUrl = urlParams.get('tool');

                if (toolUrl) {
                    const button = document.querySelector(`.open-tool[data-url="${toolUrl}"]`);
                    if (button) {
                        button.click();
                    }
                } else {
                    closeToolViewer();
                }
            });

            // 4. Initial Load Check
            const urlParams = new URLSearchParams(window.location.search);
            const initialToolUrl = urlParams.get('tool');
            if (initialToolUrl) {
                const initialButton = document.querySelector(`.open-tool[data-url="${initialToolUrl}"]`);
                if (initialButton) {
                    initialButton.click();
                }
            }


            /* --- JAVASCRIPT FOR VIDEO MODAL --- */

            // 5. Video Modal Handler
            const tutorialLinks = document.querySelectorAll('.tutorial-link');
            const videoModal = document.getElementById('video-modal');
            const tutorialVideo = document.getElementById('tutorial-video');
            const closeModalButton = document.querySelector('.close-modal-button');

            tutorialLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent link from navigating
                    const videoSrc = e.currentTarget.getAttribute('data-video-src');
                    
                    tutorialVideo.src = videoSrc;
                    // --- THIS IS THE NEW LINE ---
                    tutorialVideo.muted = false; // Explicitly unmute the video
                    
                    videoModal.style.display = 'flex';
                });
            });

            function closeVideoModal() {
                videoModal.style.display = 'none';
                tutorialVideo.pause(); // Stop the video from playing in the background
                tutorialVideo.src = ''; // Clear the source
            }

            closeModalButton.addEventListener('click', closeVideoModal);
            
            // Also close the modal if the user clicks on the dark overlay
            videoModal.addEventListener('click', (e) => {
                if (e.target === videoModal) {
                    closeVideoModal();
                }
            });

        });
    </script>
</body>
</html>